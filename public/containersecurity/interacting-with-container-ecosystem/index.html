<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Demestifying Container and Orchestration Ecosystem">
<meta name="author" content="CloudNativeFolks">

<title>Interacting with container ecosystem · kubedaily</title>

<link rel="canonical" href="https://kubedaily.com/containersecurity/interacting-with-container-ecosystem/">









<link rel="stylesheet" href="/scss/base.css" integrity="">



<link rel="stylesheet" href="/scss/theme/default.css" integrity="">



  <link rel="preconnect" href="https://-dsn.algolia.net" crossorigin />
  
  <link rel="stylesheet" href="/scss/component/docsearch.css" integrity=""/>

<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/img/icon/favicon.ico">
<link rel="icon" href="/img/icon/icon-16.png" sizes="16x16" type="image/png">
<link rel="icon" href="/img/icon/icon-32.png" sizes="32x32" type="image/png">
<link rel="apple-touch-icon" href="/img/icon/icon-180.png" sizes="180x180">
<script async src="https://www.googletagmanager.com/gtag/js?id="></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', '');
</script>
    <script 
     src="https://cdn.jsdelivr.net/npm/quizdown@latest/public/build/quizdown.js">
  </script>
  <script 
      src="https://cdn.jsdelivr.net/npm/quizdown@latest/public/build/extensions/quizdownKatex.js">
  </script>
  <script 
      src="https://cdn.jsdelivr.net/npm/quizdown@latest/public/build/extensions/quizdownHighlight.js">
  </script>
  <script>quizdown.register(quizdownHighlight).register(quizdownKatex).init()</script> 
  </head>
  <body>
    <header id="site-header">
  
  <div id="site-header-brand">
    <a href="/">kubedaily</a>
  </div>

  
  <div id="site-header-controls">
    
    <div class="dropdown">
      <button class="dropdown-btn" aria-haspopup="menu" aria-label="theme selector">
        <i class="icon icon-brightness"></i>
        <i class="icon icon-select"></i>
      </button>
      <ul role="menu" class="dropdown-menu">
        <li role="menuitem"><button class="color-scheme" data-value="light"><i class="icon icon-light-mode"></i> Light</button></li>
        <li role="menuitem"><button class="color-scheme" data-value="dark"><i class="icon icon-dark-mode"></i> Dark &nbsp;</button></li>
        <li role="menuitem"><button class="color-scheme" data-value="night"><i class="icon icon-night-mode"></i> Night</button></li>
      </ul>
    </div>

    
    <div class="dropdown">
      <button class="dropdown-btn" aria-haspopup="menu" aria-label="language selector">
        <i class="icon icon-translate"></i>
        <i class="icon icon-select"></i>
      </button>
      <ul role="menu" class="dropdown-menu">
        
          <li role="menuitem"><a href="#">English</a></li>
        
      </ul>
    </div>
  </div>

  
  <div id="site-header-menu">
    <nav>
      <ul>
        
        
        
          
          <li><a href="/" ><i class='icon icon-home'></i>Home</a></li>
        
          
          <li><a href="/docker/" ><i class='icon icons8-docker '></i>Docker</a></li>
        
          
          <li><a href="/containersecurity/"  class="active"><i class='icon icon-book'></i>ContainerSecurity</a></li>
        
          
          <li><a href="/k8s/" ><i class='icon icons8-kubernetes'></i>Kubernetes</a></li>
        
          
          <li><a href="/blog/" ><i class='icon icon-book'></i>blog</a></li>
        
          
          <li><a href="https://kubedaily.com/cloudnativetools/" ><i class='icon icon-book'></i>cloudnativetools</a></li>
        
      </ul>
    </nav>
  </div>

  

</header>
    
<div id="site-main-content-wrapper">
  
  
    <aside id="sidebar">
  <span class="btn-close"><i class="icon icon-close"></i></span>

  <div class="sticky"><strong class="sidebar-section">Container Security</strong>
          
          <a class="sidebar-link " href="/containersecurity/overview/">
            
              Overview
            
          </a>

        <strong class="sidebar-section">🔒ContainerSecurity</strong>
          
          <a class="sidebar-link " href="/containersecurity/what-is-container/">
            
              What is container?
            
          </a>

        
          
          <a class="sidebar-link " href="/containersecurity/container-vs-virtualization/">
            
              Container vs Virtualization
            
          </a>

        
          
          <a class="sidebar-link " href="/containersecurity/namespaces/">
            
              Namespaces
            
          </a>

        
          
          <a class="sidebar-link " href="/containersecurity/cgroups/">
            
              Cgroups
            
          </a>

        
          
          <a class="sidebar-link " href="/containersecurity/capabilities/">
            
              Capabilities
            
          </a>

        
          
          <a class="sidebar-link " href="/containersecurity/docker-architecture-and-its-components/">
            
              Docker architecture and its components
            
          </a>

        
          
          <a class="sidebar-link current" href="/containersecurity/interacting-with-container-ecosystem/">
            
              Interacting with container ecosystem
            
          </a>

        
          
          <a class="sidebar-link " href="/containersecurity/attack-surface-of-the-container-ecosystem/">
            
              Attack surface of the container ecosystem
            
          </a>

        
          
          <a class="sidebar-link " href="/containersecurity/docker-volumes/">
            
              Docker volumes
            
          </a>

        
          
          <a class="sidebar-link " href="/containersecurity/docker-networking/">
            
              Docker Networking
            
          </a>

        
          
          <a class="sidebar-link " href="/containersecurity/auditing-docker-security/">
            
              Auditing Docker Security
            
          </a>

        
          
          <a class="sidebar-link " href="/containersecurity/container-image-security/">
            
              Container Image Security
            
          </a>

        
          
          <a class="sidebar-link " href="/containersecurity/dockerfile-security-best-practices/">
            
              DockerFile Security Best Practices
            
          </a>

        
          
          <a class="sidebar-link " href="/containersecurity/secretscanner-finding-secrets-and-passwords-in-container-images-and-file-systems/">
            
              SecretScanner - Finding secrets and passwords in container images and file systems
            
          </a>

        
          
          <a class="sidebar-link " href="/containersecurity/yarahunter-malware-scanner-for-container-images/">
            
              YaraHunter - Malware Scanner for Container Images
            
          </a>

        
          
          <a class="sidebar-link " href="/containersecurity/security-linting-of-dockerfiles/">
            
              Security Linting of Dockerfiles
            
          </a>

        
          
          <a class="sidebar-link " href="/containersecurity/static-analysis-of-container-images-library-for-container/">
            
              Static Analysis of container images library for container
            
          </a>

        
          
          <a class="sidebar-link " href="/containersecurity/docker-host-security-configurations/">
            
              Docker host security configurations
            
          </a>

        
          
          <a class="sidebar-link " href="/containersecurity/docker-daemon-security-configurations/">
            
              Docker Daemon security configurations
            
          </a>

        
          
          <a class="sidebar-link " href="/containersecurity/content-trust-and-integrity-checks/">
            
              Content Trust and Integrity checks
            
          </a>

        
          
          <a class="sidebar-link " href="/containersecurity/docker-registry-security-configurations/">
            
              Docker Registry security configurations
            
          </a>

        
          
          <a class="sidebar-link " href="/containersecurity/dockerscan/">
            
              DockerScan
            
          </a>

        
          
          <a class="sidebar-link " href="/containersecurity/dive/">
            
              Dive
            
          </a>

        
          
          <a class="sidebar-link " href="/containersecurity/docker-events/">
            
              Docker events
            
          </a>

        
          
          <a class="sidebar-link " href="/containersecurity//">
            
              
            
          </a>

        
          
          <a class="sidebar-link " href="/containersecurity//">
            
              
            
          </a>

        
          
          <a class="sidebar-link " href="/containersecurity//">
            
              
            
          </a>

        
          
          <a class="sidebar-link " href="/containersecurity//">
            
              
            
          </a>

        
  </div>
</aside>
  
  <main>
    <article id="article">
      <nav id="article-nav">
  <button id="article-nav-menu-btn"><i class="icon icon-menu"></i> On this section</button>
  <button id="article-nav-toc-btn"><i class="icon icon-toc"></i> On this page</button>
</nav>
      <header id="article-header">
  <h1>Interacting with container ecosystem</h1>
</header>
      <div id="article-content">
        
        
        <h1 id="interacting-with-container-ecosystem">Interacting with container ecosystem</h1>
<ul>
<li>
<p>Docker Images and Image Layers</p>
<ul>
<li>
<p>In Docker, an image is a lightweight, stand-alone, executable package that includes everything needed to run a piece of software, including the application code, libraries, dependencies, and runtime. It&rsquo;s used to build and run containerized applications.</p>
</li>
<li>
<p>A Docker image is made up of a series of layers, where each layer represents an   instruction in the image&rsquo;s Dockerfile. When you build an image, each instruction in the Dockerfile creates a new layer in the image. For example, if the Dockerfile has a COPY instruction to copy in some new files, that creates a new layer in the image with those files. If you then change a file and rebuild the image, only the layers that have changed need to be rebuilt, which makes building images faster and more efficient.</p>
</li>
<li>
<p>Each layer is a delta of the changes made in that instruction compared to the previous layer. When you run a container from an image, Docker creates a new top writable layer on top of the underlying layers, allowing you to make changes to the running container. These changes are not persisted when the container is stopped and removed, unless you commit the changes to a new image.</p>
</li>
<li>
<p>In summary, a Docker image is a lightweight, stand-alone, executable package that contains everything needed to run a piece of software, and it is made up of a series of layers representing instructions in the image&rsquo;s Dockerfile.</p>
</li>
</ul>
</li>
</ul>
<h1 id="docker-images-commands">Docker images commands</h1>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker images <span class="o">[</span>OPTIONS<span class="o">]</span> <span class="o">[</span>REPOSITORY<span class="o">[</span>:TAG<span class="o">]]</span>
</span></span></code></pre></div><ul>
<li>
<p>The default docker images will show all top level images, their repository and tags, and their size.
<!-- raw HTML omitted --></p>
</li>
<li>
<p>Docker images have intermediate layers that increase reusability, decrease disk usage, and speed up docker build by allowing each step to be cached. These intermediate layers are not shown by default.
<!-- raw HTML omitted --></p>
</li>
<li>
<p>The SIZE is the cumulative space taken up by the image and all its parent images. This is also the disk space used by the contents of the Tar file created when you docker save an image.</p>
</li>
<li>
<p>An image will be listed more than once if it has multiple repository names or tags. This single image (identifiable by its matching IMAGE ID) uses up the SIZE listed only once.</p>
</li>
<li>
<p>docker images - list all local Docker images</p>
</li>
</ul>
<p>Example: <code>docker images</code>
<!-- raw HTML omitted --></p>
<ul>
<li><code>docker image ls</code> - list all local Docker images with additional information such as image ID, repository, and tag</li>
</ul>
<p>Example: <code>docker image ls</code></p>
<ul>
<li><code>docker image inspect</code> - display detailed information about a Docker image</li>
</ul>
<p>Example: <code>docker image inspect ubuntu:latest</code>
<!-- raw HTML omitted --></p>
<ul>
<li>
<p><code>docker image history</code> - show the history of a Docker image
Example: <code>docker image history ubuntu:latest</code>
<!-- raw HTML omitted --></p>
</li>
<li>
<p><code>docker image pull</code> - download a Docker image from a registry
Example: <code>docker image pull ubuntu:latest</code>
<!-- raw HTML omitted --></p>
</li>
<li>
<p><code>docker image push</code> - push a Docker image to a registry
Example: <code>docker image push my-image:latest</code>
<!-- raw HTML omitted --></p>
</li>
<li>
<p><code>docker image tag</code> - add a tag to a Docker image
Example: <code>docker image tag ubuntu:latest my-image:latest</code>
<!-- raw HTML omitted --></p>
</li>
<li>
<p><code>docker image build</code> - build a Docker image from a Dockerfile
Example: <code>docker image build -t my-image:latest .</code>
<!-- raw HTML omitted --></p>
</li>
<li>
<p><code>docker image save</code> - save a Docker image to a tar archive
Example: <code>docker image save ubuntu:latest &gt; ubuntu.tar</code>
<!-- raw HTML omitted --></p>
</li>
<li>
<p><code>docker image load` - load a Docker image from a tar archive Example: </code>docker image load &lt; ubuntu.tar```</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>Name, shorthand</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>&ndash;all , -a</td>
<td></td>
<td>Show all images (default hides intermediate images)</td>
</tr>
<tr>
<td>&ndash;digests</td>
<td></td>
<td>Show digests</td>
</tr>
<tr>
<td>&ndash;filter , -f</td>
<td></td>
<td>Filter output based on conditions provided</td>
</tr>
<tr>
<td>&ndash;format</td>
<td></td>
<td>Pretty-print images using a Go template</td>
</tr>
<tr>
<td>&ndash;no-trunc</td>
<td></td>
<td>Don&rsquo;t truncate output</td>
</tr>
<tr>
<td>&ndash;quiet , -q</td>
<td></td>
<td>Only show image IDs</td>
</tr>
</tbody>
</table>
<!-- raw HTML omitted -->
<h1 id="list-recently-created-images">List recently created images</h1>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ docker images 
</span></span></code></pre></div><p>alternative</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ docker image ls 
</span></span></code></pre></div><h1 id="filtering-docker-image-list">Filtering Docker Image List</h1>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ docker images --filter <span class="s2">&#34;&lt;key&gt; = &lt;value&gt;&#34;</span>
</span></span></code></pre></div><p>With the <code>–filter</code> option, you can specify the following keys :</p>
<!-- raw HTML omitted -->
<ul>
<li><code>reference</code> : that can be used in order to isolate images having a certain name or tag;</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ docker images --filter <span class="s2">&#34;reference=deb*&#34;</span>
</span></span></code></pre></div><p><code>before</code> : to filter images created “before” a specific point in time;</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ docker images --filter <span class="s2">&#34;before=&lt;image_name&gt;&#34;</span>
</span></span></code></pre></div><p><code>since</code> : to filter images since a specific point in time (usually another image creation);</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">  docker images --filter <span class="s2">&#34;since=&lt;image_name&gt;&#34;</span>
</span></span></code></pre></div><p><code>label</code> : if you used the LABEL instruction to create metadata for your image you can filter them later with this key</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> $ docker images --filter <span class="s2">&#34;label=maintainer=&lt;email&gt;&#34;</span>
</span></span></code></pre></div><p><code>dangling</code> : in order to isolate images that are not used anymore.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker images --filter <span class="s2">&#34;dangling=true&#34;</span>
</span></span></code></pre></div><h3 id="here-are-some-examples-of-using-the-docker-images-command-with-the---format-option">Here are some examples of using the &lsquo;docker images&rsquo; command with the &lsquo;&ndash;format&rsquo; option:</h3>
<p>To list all Docker images and their IDs in a table format, use the following command:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker images --format <span class="s2">&#34;table {{.ID}}\t{{.Repository}}&#34;</span>
</span></span></code></pre></div><p>output</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">IMAGE ID REPOSITORY
</span></span><span class="line"><span class="cl">4f4b6b93e0a4 alpine
</span></span></code></pre></div><p>To list all Docker images and their sizes in a custom format, use the following command:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker images --format <span class="s2">&#34;{{.Size}}\t{{.Repository}}&#34;</span>
</span></span></code></pre></div><p>output</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">SIZE REPOSITORY
</span></span><span class="line"><span class="cl">3.99 MB alpine
</span></span></code></pre></div><p>To list all Docker images and their created dates in a custom format, use the following command:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker images --format <span class="s2">&#34;{{.CreatedAt}}\t{{.Repository}}&#34;</span>
</span></span></code></pre></div><p>output</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">CREATED AT REPOSITORY
</span></span><span class="line"><span class="cl">2022-03-01T00:00:00Z alpine
</span></span></code></pre></div><p>To list all Docker images with their full repository and tag names, use the <code>--no-trunc</code> flag:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker images --all --no-trunc
</span></span></code></pre></div><p><code>docker images --quiet</code> - This command lists all of the Docker images on the system, but only displays the image IDs.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker images --quiet
</span></span></code></pre></div><p>output</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">cdd72a7d23c8
</span></span></code></pre></div><p><code>docker pull --quiet [image name]</code> - This command pulls a Docker image from the registry, but only displays the image ID of the image being pulled.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker pull --quiet alpine
</span></span></code></pre></div><p>output</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">d9e555c53f53
</span></span></code></pre></div><p><code>docker build --quiet -t [image name] [Dockerfile location]</code> - This command builds a Docker image from a Dockerfile, but only displays the image ID of the image being built.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker build --quiet -t my-image .
</span></span></code></pre></div><p>output</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">24c1f2a1c63d
</span></span></code></pre></div><h1 id="understand-image-layers">Understand Image Layers</h1>
<!-- raw HTML omitted -->
<p>to save on computational efforts when building images , and bandwidth (aka pulling and pushing ) them</p>
<p>Build Container images</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">FROM node:alpine
</span></span><span class="line"><span class="cl">WORKDIR /app
</span></span><span class="line"><span class="cl">COPY package*.json ./
</span></span><span class="line"><span class="cl">RUN npm install
</span></span><span class="line"><span class="cl">COPY ./ ./
</span></span><span class="line"><span class="cl">CMD <span class="o">[</span><span class="s2">&#34;npm&#34;</span>, <span class="s2">&#34;start&#34;</span><span class="o">]</span>
</span></span></code></pre></div><p>This Dockerfile contains instructions needed to build a basic Node.js app image on Docker. When you run a <code>docker build</code> command, Docker starts executing these instructions one at a time, iteratively.</p>
<p><img src="./images/image-layer.png" alt=""></p>
<p>Each time a command is executed from the Dockerfile, a new image layer is created on top of the existing image. This process is iterated until Docker reads the last command of the Dockerfile. Each instruction created a new image.</p>
<p><img src="./images/image-layer-execute.png" alt=""></p>
<h1 id="composition-of-a-docker-image">Composition of a Docker Image</h1>
<p>typically , an image can constitute the following</p>
<ul>
<li>
<p>Base Image</p>
<ul>
<li>
<p>all of the container iamges are created from the base image. this ia an emoty first layer that allows users to build their images form scratch</p>
</li>
<li>
<p>if you do not want to create your base image from scratch, you can use an official Docker image like Centos as your base image or customize one of the official Docker images to your requirements.
<!-- raw HTML omitted --></p>
</li>
</ul>
</li>
<li>
<p>Parent Image</p>
</li>
<li>
<p>the parent images is most cases, the first Docker image layer. This is foundation of all other layers in your Docker. Thus, this layer provides the basic building blocks for container environments.
<!-- raw HTML omitted --></p>
</li>
<li>
<p>Layers</p>
<ul>
<li>The other Docker layers are added to the base image using a code to allow them to run in a container. Docker’s default status displays all the top-layer images, including file sizes, tags, and repositories. Caching of intermediate layers makes it easier to view the top layers. Storage drives in Docker manage the contents in image layers.</li>
</ul>
</li>
<li>
<p>Container layer</p>
<ul>
<li>Besides creating a new container, a Docker image creates a container or writable layer. It hosts the changes that you make to your running container. This layer also stores the deleted and newly written files and changes made to the existing files. This layer is also useful when customizing containers.</li>
</ul>
</li>
<li>
<p>Docker manifest</p>
</li>
</ul>
<p>The list of all image layers created by specific image names is known as a Docker manifest. These manifests are used the same way you would use an image name in the <code>docker run</code> and <code>pull</code> commands.</p>
<p>To build a Docker container image using a Dockerfile, follow these steps:</p>
<ul>
<li>Create a new directory and navigate to it in your terminal.</li>
<li>Inside the directory, create a file named <code>Dockerfile</code> (without any file extension).</li>
<li>Inside the Dockerfile, specify the base image you want to build from using the &ldquo;FROM&rdquo; directive. For example:</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">FROM alpine
</span></span></code></pre></div><ul>
<li>Add any additional instructions to the Dockerfile, such as installing packages, copying files, or setting environment variables.</li>
<li>Save the Dockerfile.</li>
<li>In your terminal, navigate to the directory containing the Dockerfile.</li>
<li>Run the <code>docker build</code> command, followed by the desired name and tag for the image, and the path to the Dockerfile:</li>
</ul>
<p><code>docker build -t my-image:latest .</code></p>
<p>The Docker engine will now build the image based on the instructions in the Dockerfile.
Once the build is complete, you can verify that the image was created by running the &ldquo;docker images&rdquo; command:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker images
</span></span></code></pre></div><h1 id="dockerfile-instructions-with-example">Dockerfile instructions with example</h1>
<p>1.<code>FROM</code>: This instruction sets the base image for the Docker container. For example:</p>
<p><code>FROM ubuntu:latest</code></p>
<p>2.<code>RUN</code>: This instruction runs a command in the container. For example:</p>
<p><code>RUN apt-get update</code></p>
<p>3.<code>COPY</code>: This instruction copies files from the host machine to the container. For example:</p>
<p><code>COPY app/ /app</code></p>
<p>4.<code>ADD</code>: This instruction is similar to COPY, but it can also handle URL sources and automatically decompress compressed files. For example:</p>
<p><code>ADD https://example.com/app.tar.gz /app</code></p>
<p>5.<code>ENV</code>: This instruction sets environment variables in the container. For example:</p>
<p><code>ENV LANG=en_US.UTF-8</code></p>
<p>6.<code>WORKDIR</code>: This instruction sets the working directory for the container. For example:</p>
<p><code>WORKDIR /app</code></p>
<p>7.<code>EXPOSE</code>: This instruction exposes a port on the container to be accessed from the host machine. For example:</p>
<p><code>EXPOSE 8080</code></p>
<p>8.<code>CMD</code>: This instruction sets the default command to be run when the container is started. For example:</p>
<p><code>CMD [&quot;python&quot;, &quot;app.py&quot;]</code></p>
<p>9.<code>ENTRYPOINT</code>: This instruction sets the default command to be run when the container is started, but it cannot be overridden by command-line arguments. For example:</p>
<p><code>ENTRYPOINT [&quot;python&quot;, &quot;app.py&quot;]</code></p>
<h1 id="lab-1">Lab 1</h1>
<p>Begin by creating a new file called &ldquo;Dockerfile&rdquo; in your project directory.
In the Dockerfile, we will first specify the base image that we will be using. For this example, we will be using the latest version of Ubuntu as our base image.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">FROM ubuntu:latest
</span></span></code></pre></div><p>Next, we will run the necessary commands to install Git on the base image.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">RUN apt-get update
</span></span><span class="line"><span class="cl">RUN apt-get install -y git
</span></span></code></pre></div><p>Once the installation is complete, we will set the default command to run when the container starts. In this case, we will set it to run the Git version command to confirm that Git is installed and functioning correctly.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">CMD <span class="o">[</span><span class="s2">&#34;git&#34;</span>, <span class="s2">&#34;--version&#34;</span><span class="o">]</span>
</span></span></code></pre></div><p>Save the Dockerfile and close it.
To build the Docker image, we will use the &ldquo;docker build&rdquo; command and specify the path to the Dockerfile as an argument.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker build -t my_git_image .
</span></span></code></pre></div><p>This will start a new container based on the &ldquo;my_git_image&rdquo; image and run the default command specified in the Dockerfile. The output should show the version of Git installed in the image.</p>
<h1 id="lab-2">Lab 2</h1>
<p>In the Dockerfile, specify the base image you want to use. For example:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">FROM ubuntu:20.04
</span></span></code></pre></div><p>Add the ADD instruction to your Dockerfile to copy files or directories from your local system into the image. For example:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ADD my_file.txt /app/
</span></span><span class="line"><span class="cl">ADD my_directory /app/
</span></span></code></pre></div><p>Use the RUN instruction to execute any necessary commands or installs for your image.</p>
<p>Use the CMD instruction to specify the command that will be run when a container is started from this image.</p>
<p>Build the Docker image using the following command:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker build -t my_image_name .
</span></span></code></pre></div><p>Run the image using the following command:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker run -d my_image_name
</span></span></code></pre></div><h1 id="lab-2-1">Lab 2</h1>
<p><code>Dockerfile</code>in your favorite text editor and add the following content to it:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">FROM ubuntu:18.04
</span></span><span class="line"><span class="cl">CMD <span class="o">[</span><span class="s2">&#34;echo&#34;</span>, <span class="s2">&#34;Hello, World!&#34;</span><span class="o">]</span>
</span></span></code></pre></div><p>This <code>Dockerfile</code> specifies that we want to use the <code>ubuntu:18.04</code> base image and run the echo command with the arguments<code>&quot;Hello, World!&quot;</code> when the container is started.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker build -t myimage .
</span></span><span class="line"><span class="cl">docker run myimage
</span></span></code></pre></div><h1 id="lab-3">Lab 3</h1>
<p>In the Dockerfile, specify the base image that your image will be built on. For this example, we will use the alpine base image, which is a lightweight version of Linux:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">FROM alpine
</span></span></code></pre></div><p>Next, add the COPY instruction to copy a file or directory from your local machine into the image. For example, if you want to copy the file <code>hello.txt</code> from your current directory into the image, you would use the following instruction:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">COPY hello.txt /
</span></span></code></pre></div><p>ou can also specify a different destination for the file. For example, if you want to copy hello.txt into the /app directory inside the image, you would use the following instruction:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">COPY hello.txt /app/
</span></span></code></pre></div><p>Now that you have specified the base image and the files to be copied, you can build your Docker image. Run the following command to build the image, replacing my-image with the desired name for your image:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">docker build -t my-image .
</span></span></code></pre></div><p>To verify that the image was built successfully and that the file was copied into the image, you can run the following command to view the list of available Docker images:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker images
</span></span></code></pre></div><p>You should see your new image listed in the output. To run the image, use the docker run command, followed by the name of the image:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker run my-image
</span></span></code></pre></div><h1 id="lab-4">Lab 4</h1>
<p>here is an example of creating a Python app with an Entrypoint instruction:</p>
<p>First, create a new directory for your app and navigate to it in the command line.
Create a file called <code>app.py</code> and add the following code:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Hello, world!&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&#34;__main__&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">main</span><span class="p">()</span>
</span></span></code></pre></div><p>Next, create a file called <code>Dockerfile</code> and add the following code:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">FROM python:3.8-slim
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">COPY app.py /app/app.py
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ENTRYPOINT <span class="o">[</span><span class="s2">&#34;python&#34;</span>, <span class="s2">&#34;/app/app.py&#34;</span><span class="o">]</span>
</span></span></code></pre></div><p>Build the Docker image by running the following command:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker build -t my-app .
</span></span></code></pre></div><p>Run the Docker image by using the following command:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker run my-app
</span></span></code></pre></div><h1 id="lab-5">Lab 5</h1>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">FROM nginx:alpine
</span></span><span class="line"><span class="cl">WORKDIR /var/www/html
</span></span><span class="line"><span class="cl">COPY . .
</span></span><span class="line"><span class="cl">EXPOSE <span class="m">80</span>
</span></span><span class="line"><span class="cl">CMD <span class="o">[</span><span class="s2">&#34;nginx&#34;</span>, <span class="s2">&#34;-g&#34;</span>, <span class="s2">&#34;daemon off;&#34;</span><span class="o">]</span>
</span></span></code></pre></div><p>This Dockerfile will use the nginx:alpine image as a base, set the working directory to /var/www/html, copy all the files in the current directory (.) to the working directory, expose port 80, and start the nginx daemon.</p>
<p>Now let&rsquo;s create a sample HTML file called<code>index.html</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Nginx Workdir Example<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Welcome to the Nginx Workdir Example<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</span></span></code></pre></div><p>Now we can build and run the Docker container using the following commands:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker build -t nginx-workdir .
</span></span><span class="line"><span class="cl">docker run -p 8080:80 nginx-workdir
</span></span></code></pre></div><p>This will build the Docker image with the tag nginx-workdir and run the container, mapping port 8080 on the host machine to port 80 in the container.</p>
<p>To verify that everything is working, open your web browser and navigate to <code>http://localhost:8080</code>. You should see the content of the index.html file displayed.</p>
<p>That&rsquo;s it! You have successfully created a Docker container using the <code>WORKDIR</code> instruction to set the working directory for the nginx daemon.</p>
<h1 id="lab-6">Lab 6</h1>
<ul>
<li>Pull the Nginx image from Docker Hub:</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker pull nginx
</span></span></code></pre></div><ul>
<li>Create a directory on your local machine that you want to use as the volume for Nginx:</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">mkdir /path/to/volume
</span></span></code></pre></div><ul>
<li>Run the Nginx container and mount the volume using the -v flag:</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker run -d -p 80:80 -v /path/to/volume:/usr/share/nginx/html:ro nginx
</span></span></code></pre></div><ul>
<li>Test that the volume is working by creating a file in the volume directory on your local machine:</li>
</ul>
<p><code>echo &quot;Hello, World!&quot; &gt; /path/to/volume/index.html</code></p>
<ol start="5">
<li>Visit http://localhost in your web browser to see the contents of the volume displayed in the Nginx container.</li>
</ol>
<p>Note: The -d flag runs the container in detached mode, the -p flag maps port 80 on the host to port 80 in the container, and the :ro flag makes the volume read-only inside the container.</p>
<h2 id="storing-data-in-a-container">Storing data in a container</h2>
<ul>
<li>Storing data in a container(mounts, volumes, etc.)<!-- raw HTML omitted --></li>
<li>Networking in containers<!-- raw HTML omitted --></li>
</ul>
<h2 id="storing-data-in-a-docker-container">Storing data in a docker container</h2>
<p>There are several options for storing data in a docker container:</p>
<ul>
<li>
<p>Use a volume: Docker volumes allow you to persist data outside of the container, so it can be shared between multiple containers or saved even if the container is stopped or removed. You can create a volume using the &ldquo;docker volume create&rdquo; command and then mount it to a specific directory in your container using the &ldquo;-v&rdquo; flag in the &ldquo;docker run&rdquo; command.</p>
</li>
<li>
<p>Create a volume using the docker volume create command:</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ docker volume create data-volume
</span></span></code></pre></div><ul>
<li>Run a docker container and mount the volume using the -v flag:</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ docker run -d --name my-container -v data-volume:/data ubuntu:latest
</span></span></code></pre></div><ul>
<li>Check if the volume is mounted to the container by using the docker inspect command:</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ docker inspect my-container <span class="p">|</span> grep Mounts
</span></span></code></pre></div><p>You should see output similar to this:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="s2">&#34;Mounts&#34;</span>: <span class="o">[</span>
</span></span><span class="line"><span class="cl">            <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;Type&#34;</span>: <span class="s2">&#34;volume&#34;</span>,
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;Name&#34;</span>: <span class="s2">&#34;data-volume&#34;</span>,
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;Source&#34;</span>: <span class="s2">&#34;/var/lib/docker/volumes/data-volume/_data&#34;</span>,
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;Destination&#34;</span>: <span class="s2">&#34;/data&#34;</span>,
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;Driver&#34;</span>: <span class="s2">&#34;local&#34;</span>,
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;Mode&#34;</span>: <span class="s2">&#34;&#34;</span>,
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;RW&#34;</span>: true,
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;Propagation&#34;</span>: <span class="s2">&#34;&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="o">]</span>,
</span></span></code></pre></div><p>Now, any data that you write to the /data directory inside the container will be persisted in the volume.</p>
<p>For example, you can create a file in the /data directory:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ docker <span class="nb">exec</span> -it my-container touch /data/test.txt
</span></span></code></pre></div><p>To verify that the data has been persisted, you can run another container and mount the same volume:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ docker run -it --name my-container-2 -v data-volume:/data ubuntu:latest bash
</span></span></code></pre></div><p>Inside the new container, you should be able to see the test.txt file:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ ls /data
</span></span><span class="line"><span class="cl">test.txt
</span></span></code></pre></div><p>This demonstrates how you can use a volume to store data in a docker container. The data will persist even if the container is stopped or deleted, as it is stored in the volume, which is managed by Docker.</p>
<p>Use a bind mount:</p>
<p>A bind mount is a file or directory on the host machine that is mounted into a container. This allows you to access data on the host machine from within the container. You can create a bind mount using the <code>-v</code> flag in the &ldquo;docker run&rdquo; command, specifying the path to the file or directory on the host as well as the desired mount point in the container.</p>
<p>Create a directory on the host machine that you want to use as the bind mount. For example:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">mkdir /data
</span></span></code></pre></div><p>Run the docker container, using the -v flag to specify the bind mount. The syntax is <code>-v host_directory:container_directory</code>. For example:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker run -d -p 8080:80 -v /data:/var/www/html my_web_server
</span></span></code></pre></div><p>This will mount the /data directory on the host machine to the /var/www/html directory in the container, which is typically the root directory for web server content.</p>
<ul>
<li>You can now add or modify files in the /data directory on the host machine and they will be automatically reflected in the container&rsquo;s /var/www/html directory.</li>
<li>To verify that the bind mount is working, you can create a test file in the /data directory on the host machine:</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;This is a test file&#34;</span> &gt; /data/test.txt
</span></span></code></pre></div><p>Then, open a shell in the container and check if the file exists in the <code>/var/www/html</code> directory:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker <span class="nb">exec</span> -it my_web_server /bin/bash
</span></span><span class="line"><span class="cl">ls /var/www/html
</span></span></code></pre></div><p>You should see the test.txt file listed in the output.</p>
<p>Use a data container: A data container is a container specifically designed to store data that can be shared between multiple containers. You can create a data container using the <code>docker create</code> command, and then mount the data container&rsquo;s volume to a specific directory in other containers using the &ldquo;-v&rdquo; flag in the &ldquo;docker run&rdquo; command.</p>
<p>Create a new data container using the docker create command. For example:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker create -v /data --name data-container busybox /bin/true
</span></span></code></pre></div><p>This creates a data container with a volume at /data and a name of data-container.</p>
<p>Start the data container using the docker start command. For example:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">docker run -it --volumes-from data-container --name app-container ubuntu bash
</span></span></code></pre></div><p>This creates a new container named app-container that will use the volume from the data container.</p>
<ul>
<li>In the app-container, you can now access the data stored in the data-container. For example:</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@7bd72f1f0f77:/# ls /data
</span></span></code></pre></div><p>This will show the contents of the /data volume in the data-container.</p>
<p>To stop the data container, use the docker stop command. For example:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker stop data-container
</span></span></code></pre></div><p>This will stop the data container, but the data will still be available in the app-container.</p>
<p>To delete the data container, use the docker rm command. For example:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker rm data-container
</span></span></code></pre></div><p>This will delete the data container, but the data will still be available in the app-container.</p>
<ol start="4">
<li>Use a host path: You can also store data directly on the host machine and access it from within the container using the &ldquo;-v&rdquo; flag in the &ldquo;docker run&rdquo; command, specifying the path on the host machine as the mount point in the container. However, this option is not recommended as it can lead to issues with container portability and separation of concerns.</li>
</ol>
<p>To use a host path to store data in Docker, you will need to use the &ldquo;-v&rdquo; flag in the &ldquo;docker run&rdquo; command to specify the host path and the container path for the data volume. Here is an example using a MongoDB container:</p>
<p>First, create a directory on your host machine to store the data:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">mkdir -p /data/mongodb
</span></span></code></pre></div><p>Run the MongoDB container, using the &ldquo;-v&rdquo; flag to mount the host path as a data volume in the container:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker run -d --name mongodb -v /data/mongodb:/data/db mongo:latest
</span></span></code></pre></div><p>You can verify that the data volume is being used by the container by checking the output of the &ldquo;docker inspect&rdquo; command:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker inspect mongodb <span class="p">|</span> grep -i <span class="s2">&#34;Mounts&#34;</span>
</span></span></code></pre></div><p>This should return a list of all the mounted data volumes, including the host path that you specified in the &ldquo;docker run&rdquo; command.</p>
<p>Note: Make sure that the host path that you specify in the &ldquo;-v&rdquo; flag exists and is readable/writable by the container. Otherwise, the container may not start or may have issues accessing the data volume.</p>
<h1 id="networking-in-containers">Networking in containers</h1>
<p>There are two types of networking in Docker:</p>
<ul>
<li>Bridge networking: This is the default networking mode in Docker. It creates a virtual network between containers on the same host. Each container is given its own IP address within this network, and containers can communicate with each other using this network.</li>
</ul>
<p>First, create a Dockerfile that will build our container:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">  FROM alpine
</span></span><span class="line"><span class="cl">  CMD <span class="o">[</span><span class="s2">&#34;echo&#34;</span>, <span class="s2">&#34;Hello World!&#34;</span><span class="o">]</span>
</span></span></code></pre></div><p>Build the image using the following command:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker build -t hello-world .
</span></span><span class="line"><span class="cl">docker run -it hello-world
</span></span></code></pre></div><p>Inspect the container&rsquo;s networking configuration using the following command:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="s2">&#34;NetworkSettings&#34;</span>: <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;Bridge&#34;</span>: <span class="s2">&#34;&#34;</span>,
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;SandboxID&#34;</span>: <span class="s2">&#34;4f3c70f4f74b1dc5d5e5e3f5e5ed72c5e5e1f2613e1644b2aa5b004f2ab2d9e8&#34;</span>,
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;HairpinMode&#34;</span>: false,
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;LinkLocalIPv6Address&#34;</span>: <span class="s2">&#34;&#34;</span>,
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;LinkLocalIPv6PrefixLen&#34;</span>: 0,
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;Ports&#34;</span>: <span class="o">{}</span>,
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;SandboxKey&#34;</span>: <span class="s2">&#34;/var/run/docker/netns/4f3c70f4f74b&#34;</span>,
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;SecondaryIPAddresses&#34;</span>: null,
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;SecondaryIPv6Addresses&#34;</span>: null,
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;EndpointID&#34;</span>: <span class="s2">&#34;f48c68e9ce012791d63f0b3ee3b3a85d6c7f6ed5b6c4b6e5b6d5b6c2e5e5f6d4&#34;</span>,
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;Gateway&#34;</span>: <span class="s2">&#34;172.17.0.1&#34;</span>,
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;GlobalIPv6Address&#34;</span>: <span class="s2">&#34;&#34;</span>,
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;GlobalIPv6PrefixLen&#34;</span>: 0,
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;IPAddress&#34;</span>: <span class="s2">&#34;172.17.0.2&#34;</span>,
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;IPPrefixLen&#34;</span>: 16,
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;IPv6Gateway&#34;</span>: <span class="s2">&#34;&#34;</span>,
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;MacAddress&#34;</span>: <span class="s2">&#34;02:42:ac:11:00:02&#34;</span>,
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;Networks&#34;</span>: <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;bridge&#34;</span>: <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;IPAMConfig&#34;</span>: null,
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;Links&#34;</span>: null,
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;Aliases&#34;</span>: null,
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;NetworkID&#34;</span>: <span class="s2">&#34;5e5f5c5d5e5d5e5f5d5f5c5e5d5e5d5d5e5f5d5e5f5c5d5e5d5e5f5c5e5f5d5e&#34;</span>,
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;EndpointID&#34;</span>: <span class="s2">&#34;f48c68e9ce012791d63f0b3ee3b3a85d6c7f6ed5b6c4b6e5b6d5b6c2e5e5f6d4&#34;</span>,
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;Gateway&#34;</span>: <span class="s2">&#34;172.17.0.1&#34;</span>,
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;IPAddress&#34;</span>: <span class="s2">&#34;172.17.0.2&#34;</span>,
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;IPPrefixLen&#34;</span>: 16,
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;IPv6Gate
</span></span></span></code></pre></div><ul>
<li>Overlay networking: This type of networking allows you to connect multiple Docker hosts into a single virtual network. This is useful for situations where you have multiple hosts running Docker containers, and you want them to be able to communicate with each other.</li>
</ul>
<p>Overlay networking in Docker allows containers to communicate with each other across multiple hosts. This is useful for situations where you have multiple Docker hosts running and you want to create a network that spans across those hosts.</p>
<p>To demonstrate overlay networking, we will create two Docker hosts and a single network that will be shared between them. We will then create two containers, one on each host, and demonstrate that they can communicate with each other through the overlay network.</p>
<p>First, we will create two Docker hosts using Docker Machine. For this example, we will use two virtual machines running on VirtualBox.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker-machine create --driver virtualbox host1
</span></span><span class="line"><span class="cl">docker-machine create --driver virtualbox host2
</span></span></code></pre></div><p>Next, we will create an overlay network on one of the hosts. We will name this network &ldquo;mynetwork&rdquo; and specify the <code>--attachable</code> flag so that other containers can attach to it</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">eval</span> <span class="k">$(</span>docker-machine env host1<span class="k">)</span>
</span></span><span class="line"><span class="cl">docker network create --driver overlay --attachable mynetwork
</span></span></code></pre></div><p>Now that the network has been created, we can deploy containers on both hosts and attach them to the network.</p>
<p>On host1:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">eval</span> <span class="k">$(</span>docker-machine env host1<span class="k">)</span>
</span></span><span class="line"><span class="cl">docker run -d --name container1 --network mynetwork busybox
</span></span></code></pre></div><p>On host2:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">eval</span> <span class="k">$(</span>docker-machine env host2<span class="k">)</span>
</span></span><span class="line"><span class="cl">docker run -d --name container2 --network mynetwork busybox
</span></span></code></pre></div><p>Now that both containers are attached to the same overlay network, we can verify that they can communicate with each other.</p>
<p>On host1:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">eval</span> <span class="k">$(</span>docker-machine env host1<span class="k">)</span>
</span></span><span class="line"><span class="cl">docker <span class="nb">exec</span> -it container1 ping -c <span class="m">3</span> container2
</span></span></code></pre></div><p>On host2:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">eval</span> <span class="k">$(</span>docker-machine env host2<span class="k">)</span>
</span></span><span class="line"><span class="cl">docker <span class="nb">exec</span> -it container2 ping -c <span class="m">3</span> container1
</span></span></code></pre></div><p>If the ping commands are successful, it means that the containers are able to communicate with each other through the overlay network.</p>
<p>This is just a simple example of how overlay networking can be used in Docker. There are many other uses and configurations that can be explored.</p>
<h1 id="docker-compose">Docker Compose</h1>
<p>Docker Compose is a tool for defining and running multi-container Docker applications. With Compose, you use a YAML file to configure your application&rsquo;s services. Then, with a single command, you create and start all the services from your configuration.</p>
<p>To install Docker Compose, follow the instructions for your operating system:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># For macOS or Linux:</span>
</span></span><span class="line"><span class="cl">sudo curl -L <span class="s2">&#34;https://github.com/docker/compose/releases/download/1.28.5/docker-compose-</span><span class="k">$(</span>uname -s<span class="k">)</span><span class="s2">-</span><span class="k">$(</span>uname -m<span class="k">)</span><span class="s2">&#34;</span> -o /usr/local/bin/docker-compose
</span></span><span class="line"><span class="cl">sudo chmod +x /usr/local/bin/docker-compose
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># For Windows:</span>
</span></span><span class="line"><span class="cl">Download the Docker Compose binary from https://github.com/docker/compose/releases/download/1.28.5/docker-compose-Windows-x86_64.exe and save it to a location on your PATH <span class="o">(</span>e.g., C:<span class="se">\P</span>rogram Files<span class="se">\D</span>ocker<span class="o">)</span>.
</span></span></code></pre></div><p>Once Docker Compose is installed, you can use it to create and start your multi-container Docker application by using the docker-compose up command. For example, suppose you have a YAML file called docker-compose.yml that defines your application&rsquo;s services like this:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;3&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">services</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">web</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">build</span><span class="p">:</span><span class="w"> </span><span class="l">.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">ports</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="s2">&#34;5000:5000&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">volumes</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">.:/app</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">redis</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;redis:alpine&#34;</span><span class="w">
</span></span></span></code></pre></div><p>You can start all of these services with the following command:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker-compose up
</span></span></code></pre></div><p>This command will build the web service image, create and start the web and redis containers, and attach the terminal to the logs of the running containers.</p>
<h1 id="docker-compose-build">Docker Compose Build</h1>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-plaintext" data-lang="plaintext"><span class="line"><span class="cl">docker-compose build
</span></span></code></pre></div><h3 id="redeploy-just-one-service">Redeploy just one Service</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-plaintext" data-lang="plaintext"><span class="line"><span class="cl">docker-compose up $SERVICE_NAME
</span></span></code></pre></div><h3 id="start-all-services--container-using-docker-compose">start all services / container using docker compose</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-plaintext" data-lang="plaintext"><span class="line"><span class="cl">docker-compose up
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">// Specify a custom filepath for your 
</span></span><span class="line"><span class="cl">//docker-compose file 
</span></span><span class="line"><span class="cl">// (it assumes docker-compose.yml in
</span></span><span class="line"><span class="cl">//your current directory by default)
</span></span><span class="line"><span class="cl">ocker-compose -f custom-docker-compose.yml up
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">// Apply multiple compose files (changes in latter)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">docker-compose -f docker-compose.yml docker-compose-production.yml
</span></span></code></pre></div><h1 id="sample-docker-compose-file">sample docker-compose file</h1>
<pre tabindex="0"><code>
#docker-compose.yml file
version: &#39;3&#39;
services:
  # Your web application =&gt; Container
  web:
    build: .
    ports:
    - &#34;5000:5000&#34;

  # Redis cache container
  redis:
    image: &#34;redis:alpine&#34;
</code></pre><pre tabindex="0"><code>
version: &#34;3&#34;

networks:
  backend:
    driver: bridge

services:
  app:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: app
    image: ${REGISTRY}/my-project-name
    restart: always
    ports:
      - &#34;80:80&#34;
      - &#34;443:443&#34;
    depends_on:
        - db
    networks:
      - backend
    env_file:
      - ./.env

  db:
    image: mariadb:10.5
    container_name: db
    restart: always
    networks:
        backend
    volumes:
      - mysql-data:/var/lib/mysql
    environment:
      - FOO=bar
      - SOME_ENV_VAR=${SUBSTITUTED_VARIABLE}
    env_file:
      - ./.env

volumes:
  mysql-data:
    driver: local
</code></pre><p>labels</p>
<pre tabindex="0"><code>services:
  web:
    labels:
      com.app.description: &#34;My web app&#34;
</code></pre><p><a href="https://blog.cloudnativefolks.org/the-ultimate-docker-cheatsheet-for-everyone#heading-docker-compose" target="_blank">Docker CheatSheet</a></p>

      </div>
      








  
  
  
        

        
          
        

      
    
        

        
          
        

      
    
        

        
          
        

      
    
        

        
          
        

      
    
        

        
          
        

      
    
        

        
          
        

      
    
        

        
          
        

      
    
        

      
    
        

        
          
        

        
        


<footer id="article-footer">
  <time id="article-last-updated" datetime="2023-11-26"><i class="icon icon-calendar"></i>&nbsp;Last updated: 2023-11-26</time>

  
    <a id="article-prev-link" href="/containersecurity/docker-architecture-and-its-components/"><i class="icon icon-prev icon-colored"></i> Prev</a>
  

  
    <a id="article-next-link"  href="/containersecurity/attack-surface-of-the-container-ecosystem/">Next <i class="icon icon-next icon-colored"></i></a>
  
</footer>
    </article>
    <aside id="toc">
  <span class="btn-close"><i class="icon icon-close"></i></span>
  <div class="sticky">
    <strong><i class="icon icon-toc"></i> On this page</strong>
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#here-are-some-examples-of-using-the-docker-images-command-with-the---format-option">Here are some examples of using the &lsquo;docker images&rsquo; command with the &lsquo;&ndash;format&rsquo; option:</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li><a href="#storing-data-in-a-container">Storing data in a container</a></li>
    <li><a href="#storing-data-in-a-docker-container">Storing data in a docker container</a></li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#redeploy-just-one-service">Redeploy just one Service</a></li>
        <li><a href="#start-all-services--container-using-docker-compose">start all services / container using docker compose</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</aside>
  </main>
</div>

    <footer id="site-footer">
  
  <div id="site-footer-copyright">
    <a href="https://discord.gg/rEvr7vq" target="_blank">
      <i class="icon icon-copyright"></i> 2023 CloudNativeFolks
    </a>
  </div>

  
  <div id="site-footer-social">

    

    
    <a href="https://twitter.com/i/communities/1499311438745468931" target="_blank" aria-label="twitter url">
      <i class="icon icon-twitter icon-colored"></i>
    </a>
    

    
    <a href="https://github.com/sangam14" target="_blank" aria-label="github url">
      <i class="icon icon-github icon-colored"></i>
    </a>
    

    
    <a href="https://www.youtube.com/@CloudNativeFolks" target="_blank" aria-label="youtube url">
      <i class="icon icon-youtube icon-colored"></i>
    </a>
    

  </div>

  
  <center> <a href="https://visitorbadge.io/status?path=https%3A%2F%2Fkubedaily.com"><img src="https://api.visitorbadge.io/api/visitors?path=https%3A%2F%2Fkubedaily.com&label=KubeDaily&labelColor=%232ccce4&countColor=%2337d67a" /></a> </center> 

  
  <div id="site-footer-love">
    Made with <i class="icon icon-love icon-colored"></i> &nbsp;from&nbsp;<a href="https://blog.cloudnativefolks.org" target="_blank">@CloudNativeFollks</a>
  </div>
</footer>
    






<script type="text/javascript" src="/js/base.min.js"></script>



  
  <script src="/js/component/docsearch.min.js"></script>
  <script type="application/javascript">
      docsearch({
          container: '#site-header-search',
          appId: '',
          indexName: '',
          apiKey: '',
      });
  </script>


<script type="application/javascript">
    if('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/sw.js?2023-12-03')
            .catch(function(err) {console.error('ServiceWorker registration failed: ', err);});
    }
</script>
  </body>
</html>